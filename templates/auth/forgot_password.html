<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Forgot Password â€¢ GlobeTrotter</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <meta name="color-scheme" content="light only" />
  <style>
    * {
      font-family: 'Inter', sans-serif;
    }
    
    :root {
      --bg-neutral: #F0F4F8;
      --text-deep: #1A2B3D;
      --pale-card: #B8D4E3;
      --hover-forest: #2563EB;
      --text-secondary: #64748B;
      --cta: #3B82F6;
      --cta-hover: #2563EB;
      --cool-contrast: #8B5CF6;
      --error: #DC2626;
      --success: #10b981;
    }
    @media (prefers-reduced-motion: reduce) {
      * { animation-duration: 0.001ms !important; animation-iteration-count: 1 !important; transition-duration: 0.001ms !important; scroll-behavior: auto !important; }
    }

    /* Luxury animated background */
    .bg-lux-animated {
      background: linear-gradient(120deg, var(--bg-neutral), var(--pale-card), var(--bg-neutral));
      background-size: 200% 200%;
      animation: luxGradient 20s ease-in-out infinite;
    }
    @keyframes luxGradient {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* Floating background elements */
    .blob {
      filter: blur(22px);
      opacity: .28;
      animation: float 30s ease-in-out infinite;
      will-change: transform;
    }
    @keyframes float {
      0%, 100% { transform: translate(0, 0) scale(1); }
      25% { transform: translate(18px, -22px) scale(1.03); }
      50% { transform: translate(-20px, 14px) scale(.97); }
      75% { transform: translate(12px, 18px) scale(1.01); }
    }

    /* Page transition overlay with modern effects */
    .overlay {
      transform: scaleX(0);
      transform-origin: right center;
      transition: transform 600ms cubic-bezier(0.4, 0.0, 0.2, 1);
      background: linear-gradient(-45deg, var(--cta), var(--cta-hover), var(--hover-forest));
      background-size: 200% 200%;
      animation: gradientFlow 1.2s ease-in-out;
    }
    .overlay.active {
      transform: scaleX(1);
    }
    @keyframes gradientFlow {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* Modern entry animations with morphing */
    .slide-in-right {
      animation: modernSlideInRight .8s cubic-bezier(0.25, 0.46, 0.45, 0.94) both;
    }
    .slide-out-left {
      animation: modernSlideOutLeft .6s cubic-bezier(0.55, 0.085, 0.68, 0.53) both;
    }
    @keyframes modernSlideInRight {
      0% { 
        opacity: 0; 
        transform: translateX(60px) scale(0.9) rotateY(10deg);
        filter: blur(4px);
      }
      60% {
        opacity: 0.8;
        transform: translateX(10px) scale(1.02) rotateY(2deg);
        filter: blur(1px);
      }
      100% { 
        opacity: 1; 
        transform: translateX(0) scale(1) rotateY(0deg);
        filter: blur(0px);
      }
    }
    @keyframes modernSlideOutLeft {
      0% { 
        opacity: 1; 
        transform: translateX(0) scale(1) rotateY(0deg);
        filter: blur(0px);
      }
      40% {
        opacity: 0.6;
        transform: translateX(-20px) scale(0.98) rotateY(-5deg);
        filter: blur(1px);
      }
      100% { 
        opacity: 0; 
        transform: translateX(-60px) scale(0.85) rotateY(-15deg);
        filter: blur(6px);
      }
    }

    /* Field stagger animation with bounce */
    .field-stagger {
      opacity: 0;
      transform: translateY(20px) scale(0.95);
      transition: transform 500ms cubic-bezier(0.34, 1.56, 0.64, 1), opacity 500ms ease;
    }
    .field-stagger.animate {
      opacity: 1;
      transform: translateY(0) scale(1);
    }

    /* Error shake */
    .shake {
      animation: shake .35s ease both;
    }
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      20% { transform: translateX(-6px); }
      40% { transform: translateX(6px); }
      60% { transform: translateX(-4px); }
      80% { transform: translateX(4px); }
    }

    /* Floating labels */
    .field {
      position: relative;
    }
    .field input {
      padding-top: 1.25rem;
    }
    .field label {
      position: absolute;
      left: 0.875rem;
      top: 0.9rem;
      pointer-events: none;
      color: var(--text-secondary);
      transition: transform .2s ease, color .2s ease, top .2s ease;
      transform-origin: left top;
    }
    .field input:focus ~ label,
    .field input:not(:placeholder-shown) ~ label {
      top: 0.35rem;
      color: var(--hover-forest);
      transform: translateY(-2px) scale(.85);
    }

    /* Focus ring for accessibility */
    .focus-ring:focus {
      outline: 3px solid rgba(77, 188, 65, .6);
      outline-offset: 2px;
    }

    /* 3D Models and Interactive Elements */
    .floating-3d {
      transform-style: preserve-3d;
      animation: float3D 7s ease-in-out infinite;
    }
    @keyframes float3D {
      0%, 100% { transform: translateY(0) rotateX(0deg) rotateY(0deg); }
      25% { transform: translateY(-12px) rotateX(-5deg) rotateY(-15deg); }
      50% { transform: translateY(-6px) rotateX(3deg) rotateY(-30deg); }
      75% { transform: translateY(-10px) rotateX(-2deg) rotateY(-15deg); }
    }

    .hexagon-3d {
      width: 70px;
      height: 70px;
      background: linear-gradient(45deg, rgba(30, 64, 175, 0.4), rgba(77, 188, 65, 0.3));
      clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
      transform-style: preserve-3d;
      animation: rotateHex 12s linear infinite;
      backdrop-filter: blur(8px);
      border: 1px solid rgba(77, 188, 65, 0.3);
      box-shadow: 0 8px 32px rgba(30, 64, 175, 0.2);
    }
    @keyframes rotateHex {
      0% { transform: rotateY(0deg) rotateZ(0deg); }
      100% { transform: rotateY(360deg) rotateZ(60deg); }
    }

    .torus-3d {
      width: 50px;
      height: 50px;
      border: 8px solid transparent;
      border-radius: 50%;
      background: 
        radial-gradient(circle at center, transparent 60%, rgba(84, 111, 154, 0.4) 65%, transparent 75%),
        conic-gradient(from 0deg, rgba(77, 188, 65, 0.8), rgba(30, 64, 175, 0.6), rgba(171, 197, 187, 0.7), rgba(77, 188, 65, 0.8));
      animation: spinTorus 8s linear infinite;
      filter: drop-shadow(0 5px 15px rgba(77, 188, 65, 0.3));
    }
    @keyframes spinTorus {
      0% { transform: rotateY(0deg) rotateX(0deg); }
      50% { transform: rotateY(180deg) rotateX(90deg); }
      100% { transform: rotateY(360deg) rotateX(180deg); }
    }

    .diamond-3d {
      width: 60px;
      height: 60px;
      background: linear-gradient(135deg, rgba(171, 197, 187, 0.6), rgba(84, 111, 154, 0.4));
      transform: rotate(45deg);
      animation: twistDiamond 10s ease-in-out infinite;
      backdrop-filter: blur(12px);
      border: 2px solid rgba(171, 197, 187, 0.4);
      box-shadow: 0 10px 30px rgba(171, 197, 187, 0.3);
    }
    .diamond-3d::before {
      content: '';
      position: absolute;
      inset: 10px;
      background: linear-gradient(45deg, rgba(77, 188, 65, 0.3), transparent);
      transform: rotate(-45deg);
    }
    @keyframes twistDiamond {
      0%, 100% { transform: rotate(45deg) rotateY(0deg) scale(1); }
      25% { transform: rotate(45deg) rotateY(90deg) scale(1.1); }
      50% { transform: rotate(45deg) rotateY(180deg) scale(0.9); }
      75% { transform: rotate(45deg) rotateY(270deg) scale(1.05); }
    }

    .interactive-hover:hover {
      transform: translateY(-8px) scale(1.08);
      transition: all 0.4s cubic-bezier(0.4, 0.0, 0.2, 1);
    }

    .neon-glow {
      position: relative;
    }
    .neon-glow::after {
      content: '';
      position: absolute;
      inset: -15px;
      background: conic-gradient(from 0deg, transparent, rgba(77, 188, 65, 0.2), transparent);
      border-radius: 50%;
      animation: neonPulse 3s ease-in-out infinite;
      z-index: -1;
    }
    @keyframes neonPulse {
      0%, 100% { opacity: 0.5; transform: scale(1); }
      50% { opacity: 1; transform: scale(1.1); }
    }

    /* Success/Error Messages */
    .message {
      padding: 1rem 1.5rem;
      border-radius: 12px;
      margin-bottom: 1.5rem;
      display: flex;
      align-items: center;
      font-weight: 500;
      animation: slideInRight 0.3s ease-out;
    }
    
    .message-success {
      background: rgba(16, 185, 129, 0.1);
      color: var(--success);
      border: 1px solid rgba(16, 185, 129, 0.2);
    }
    
    .message-warning {
      background: rgba(245, 158, 11, 0.1);
      color: #D97706;
      border: 1px solid rgba(245, 158, 11, 0.2);
    }
    
    .message-error {
      background: rgba(239, 68, 68, 0.1);
      color: var(--error);
      border: 1px solid rgba(239, 68, 68, 0.2);
    }
    
    .message i {
      margin-right: 0.75rem;
      font-size: 1.1rem;
    }

    /* Loading spinner */
    .loading-spinner {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      border-top-color: white;
      animation: spin 1s linear infinite;
      margin-right: 8px;
    }
    
    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .form-container {
        margin: 1rem;
        padding: 2rem 1.5rem;
      }
      
      .back-btn {
        top: 1rem;
        left: 1rem;
      }
    }
  </style>
</head>

<body class="min-h-screen bg-lux-animated text-[var(--text-deep)]">
  <!-- Background decorative elements -->
  <div aria-hidden="true" class="pointer-events-none fixed inset-0 -z-10">
    <div class="blob absolute -top-24 -right-20 w-96 h-96 rounded-full" 
         style="background: radial-gradient(circle at 70% 30%, rgba(84,111,154,0.25), transparent 60%);"></div>
    <div class="blob absolute bottom-0 left-0 w-[30rem] h-[30rem] rounded-full" 
         style="background: radial-gradient(circle at 50% 50%, rgba(171,197,187,0.25), transparent 60%);"></div>
    <div class="blob absolute top-1/2 right-1/2 w-80 h-80 rounded-full transform translate-x-1/2 -translate-y-1/2" 
         style="background: radial-gradient(circle at 60% 40%, rgba(77,188,65,0.15), transparent 70%);"></div>
  </div>

  <!-- Page transition overlay -->
  <div id="overlay" class="fixed inset-0 z-20 overlay" style="background: var(--cta);"></div>

  <!-- 3D Background Elements (similar to login) -->
  <div aria-hidden="true" class="pointer-events-none fixed inset-0 -z-5">
    <!-- Rotating Hexagon -->
    <div class="floating-3d absolute top-16 left-16">
      <div class="hexagon-3d interactive-hover neon-glow"></div>
    </div>

    <!-- Spinning Torus -->
    <div class="floating-3d absolute top-32 right-20" style="animation-delay: -1.5s;">
      <div class="torus-3d interactive-hover"></div>
    </div>

    <!-- Twisting Diamond -->
    <div class="floating-3d absolute bottom-40 left-20" style="animation-delay: -3s;">
      <div class="diamond-3d interactive-hover neon-glow"></div>
    </div>

    <!-- Additional smaller elements -->
    <div class="floating-3d absolute top-20 right-1/3" style="animation-delay: -2.5s;">
      <div class="hexagon-3d interactive-hover" style="width: 45px; height: 45px; background: linear-gradient(45deg, rgba(84, 111, 154, 0.5), rgba(171, 197, 187, 0.4));"></div>
    </div>

    <div class="floating-3d absolute bottom-32 right-16" style="animation-delay: -1s;">
      <div class="torus-3d interactive-hover" style="width: 35px; height: 35px; border-width: 6px;"></div>
    </div>
  </div>

  <!-- Main container - centered form -->
  <main class="relative z-10 min-h-screen flex items-center justify-center p-6">
    <!-- Centered Form Section -->
    <section class="w-full max-w-md">
      <!-- Back Button -->
      <a href="{{ url_for('login') }}" class="inline-flex items-center mb-6 text-[var(--text-secondary)] hover:text-[var(--cta)] transition-all duration-200 hover:-translate-x-1">
        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
        </svg>
        <span class="font-medium">Back to Login</span>
      </a>

      <div id="card" class="w-full rounded-3xl bg-white/80 backdrop-blur-xl shadow-2xl ring-1 ring-white/60 p-8 hover:shadow-3xl transition-all duration-300">
        <!-- Forgot Password Form -->
        <form id="forgotPasswordForm" role="form" aria-labelledby="forgot_title" class="space-y-7" autocomplete="on" method="post" action="{{ url_for('forgot_password') }}">
          <!-- Header -->
          <header class="space-y-3 mb-8 text-center">
            <div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-r from-[var(--cta)] to-[var(--cool-contrast)] mb-4 shadow-lg">
              <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 7a2 2 0 012 2m0 0a2 2 0 012 2m-2-2a2 2 0 00-2 2m0 0a2 2 0 01-2 2m2-2a2 2 0 002-2m0 0a2 2 0 00-2-2m-2 2v10m0 0V9m0 0a2 2 0 00-2-2M9 7a2 2 0 012 2m0 0a2 2 0 012 2m-2-2a2 2 0 00-2 2m0 0a2 2 0 01-2 2"></path>
              </svg>
            </div>
            <h1 id="forgot_title" class="text-3xl font-extrabold tracking-tight text-[var(--text-deep)] mb-2">
              Forgot Password?
            </h1>
            <p class="text-sm text-[var(--text-secondary)] leading-relaxed">
              No worries! Enter your email and we'll send you a reset link.
            </p>
          </header>

          <!-- Flash Messages -->
          {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
              {% for category, message in messages %}
                <div class="message message-{{ 'success' if category == 'success' else ('warning' if category == 'warning' else 'error') }}">
                  <svg class="w-5 h-5 mr-3 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                    {% if category == 'success' %}
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                    {% elif category == 'warning' %}
                    <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                    {% else %}
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/>
                    {% endif %}
                  </svg>
                  <div class="flex-1">{{ message|safe }}</div>
                </div>
              {% endfor %}
            {% endif %}
          {% endwith %}

          <!-- Form fields with stagger animation -->
          <div class="space-y-5">
            <!-- Email Field -->
            <div class="field field-stagger">
              <div class="relative">
                <input id="email" name="email" type="email" inputmode="email" required placeholder=" " autocomplete="email"
                       class="peer w-full rounded-xl border-2 border-gray-200 bg-white/90 px-4 py-4 pl-12 text-[var(--text-deep)] placeholder-transparent shadow-sm transition-all duration-200 focus:border-[var(--cta)] focus:ring-4 focus:ring-[var(--cta)]/20 focus:outline-none hover:border-gray-300" 
                       aria-required="true" aria-label="Email address" />
                <div class="absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 transition-colors duration-200 peer-focus:text-[var(--cta)]">
                  <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"/>
                  </svg>
                </div>
                <label for="email" class="absolute left-14 top-4 text-gray-500 text-sm transition-all duration-200 origin-left peer-placeholder-shown:left-14 peer-placeholder-shown:top-4 peer-placeholder-shown:scale-100 peer-focus:left-14 peer-focus:top-1 peer-focus:scale-75 peer-focus:text-[var(--cta)] peer-valid:left-14 peer-valid:top-1 peer-valid:scale-75 peer-valid:text-[var(--cta)]">Email address</label>
              </div>
            </div>
          </div>

          <!-- Submit button -->
          <div class="field-stagger">
            <button type="submit" id="submitBtn"
                    class="w-full inline-flex items-center justify-center gap-2 rounded-xl bg-gradient-to-r from-[var(--cta)] to-[var(--cta-hover)] px-6 py-4 font-semibold text-white shadow-lg shadow-blue-600/25 transition-all duration-200 hover:scale-[1.02] hover:shadow-xl hover:shadow-blue-600/30 focus:outline-none focus:ring-4 focus:ring-blue-500/20 active:scale-[0.98]" 
                    aria-label="Send reset link">
              <span id="btnText">Send Reset Link</span>
              <span id="btnLoading" class="hidden">
                <span class="loading-spinner"></span>
                Sending...
              </span>
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"/>
              </svg>
            </button>
          </div>

          <!-- Navigation links -->
          <div class="field-stagger text-center">
            <p class="text-sm text-[var(--text-secondary)] mb-4">
              Remember your password?
            </p>
            <a href="{{ url_for('login') }}" 
               class="font-semibold text-[var(--cta)] hover:text-[var(--cta-hover)] hover:underline focus:outline-none focus:ring-2 focus:ring-[var(--cta)]/20 rounded transition-colors">
              Back to Login
            </a>
          </div>

          <!-- Help section -->
          <div class="field-stagger mt-6 p-4 bg-gray-50 rounded-xl border border-gray-200">
            <div class="flex items-start">
              <svg class="w-5 h-5 text-blue-500 mt-0.5 mr-3 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/>
              </svg>
              <div>
                <h3 class="text-sm font-semibold text-gray-900 mb-1">Need Help?</h3>
                <p class="text-xs text-gray-600 leading-relaxed">
                  If you don't receive the reset email within a few minutes, please check your spam folder or 
                  <a href="mailto:support@globetrotter.com" class="text-[var(--cta)] hover:underline">contact our support team</a>.
                </p>
              </div>
            </div>
          </div>
        </form>
      </div>
    </section>
  </main>

  <!-- JavaScript -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const card = document.getElementById('card');
      const overlay = document.getElementById('overlay');
      const staggerElements = document.querySelectorAll('.field-stagger');
      const form = document.getElementById('forgotPasswordForm');
      const submitBtn = document.getElementById('submitBtn');
      const btnText = document.getElementById('btnText');
      const btnLoading = document.getElementById('btnLoading');
      const emailInput = document.getElementById('email');

      // Check if coming from login page
      const cameFrom = sessionStorage.getItem('navFrom');
      
      // Initial animations
      function initializeAnimations() {
        // If coming from login, play overlay wipe first
        if (cameFrom === 'login') {
          overlay.style.transformOrigin = 'right center';
          overlay.classList.add('active');
          
          setTimeout(() => {
            overlay.classList.remove('active');
            sessionStorage.removeItem('navFrom');
            startFormAnimations();
          }, 650);
        } else {
          startFormAnimations();
        }
      }

      function startFormAnimations() {
        card.classList.add('slide-in-right');
        
        // Enhanced stagger with bounce timing
        staggerElements.forEach((el, index) => {
          setTimeout(() => {
            el.classList.add('animate');
          }, 400 + (index * 120));
        });

        // Clean up slide animation class
        setTimeout(() => {
          card.classList.remove('slide-in-right');
        }, 800);
      }

      // Form submission with loading state
      form.addEventListener('submit', function(e) {
        e.preventDefault();
        
        const email = emailInput.value.trim();
        if (!email) {
          showError('Please enter your email address');
          return;
        }
        
        if (!isValidEmail(email)) {
          showError('Please enter a valid email address');
          return;
        }
        
        // Show loading state
        setLoadingState(true);
        
        // Submit form via fetch
        fetch('/forgot-password', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/x-www-form-urlencoded',
            'Accept': 'application/json',
            'X-Requested-With': 'XMLHttpRequest'
          },
          body: new URLSearchParams({
            email: email
          })
        })
        .then(response => response.json())
        .then(data => {
          setLoadingState(false);
          
          if (data.success) {
            showSuccess(data.message || 'Reset link sent successfully!');
            emailInput.value = '';
          } else {
            showError(data.message || 'An error occurred. Please try again.');
          }
        })
        .catch(error => {
          console.error('Error:', error);
          setLoadingState(false);
          showError('Network error. Please check your connection and try again.');
        });
      });
      
      // Email validation on input
      emailInput.addEventListener('input', function() {
        clearMessages();
      });
      
      // Helper functions
      function setLoadingState(loading) {
        if (loading) {
          submitBtn.disabled = true;
          btnText.classList.add('hidden');
          btnLoading.classList.remove('hidden');
        } else {
          submitBtn.disabled = false;
          btnText.classList.remove('hidden');
          btnLoading.classList.add('hidden');
        }
      }
      
      function isValidEmail(email) {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return emailRegex.test(email);
      }
      
      function showError(message) {
        clearMessages();
        const errorDiv = createMessage(message, 'error');
        form.insertBefore(errorDiv, form.firstChild);
        shakeElement(card);
      }
      
      function showSuccess(message) {
        clearMessages();
        const successDiv = createMessage(message, 'success');
        form.insertBefore(successDiv, form.firstChild);
      }
      
      function createMessage(text, type) {
        const div = document.createElement('div');
        div.className = `message message-${type}`;
        div.innerHTML = `
          <svg class="w-5 h-5 mr-3" fill="currentColor" viewBox="0 0 20 20">
            ${type === 'success' ? 
              '<path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>' :
              '<path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/>'
            }
          </svg>
          ${text}
        `;
        return div;
      }
      
      function clearMessages() {
        const messages = document.querySelectorAll('.message');
        messages.forEach(msg => msg.remove());
      }

      function shakeElement(element) {
        element.style.animation = 'shake 0.5s ease-in-out';
        setTimeout(() => {
          element.style.animation = '';
        }, 500);
      }
      
      // Enhanced animations
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.style.animationDelay = '0.2s';
            entry.target.classList.add('animate-fadeInUp');
          }
        });
      });
      
      // Auto-focus email input after animations
      setTimeout(() => {
        emailInput.focus();
      }, 1000);

      // Interactive 3D model click handlers
      document.querySelectorAll('.interactive-hover').forEach(element => {
        element.addEventListener('click', function() {
          // Different click animations for different shapes
          if (this.classList.contains('hexagon-3d')) {
            this.style.transform = 'rotateY(720deg) rotateZ(180deg) scale(1.2)';
          } else if (this.classList.contains('torus-3d')) {
            this.style.transform = 'rotateX(360deg) rotateY(360deg) scale(1.15)';
          } else if (this.classList.contains('diamond-3d')) {
            this.style.transform = 'rotate(225deg) rotateY(360deg) scale(1.1)';
          } else {
            this.style.transform = 'translateY(-15px) scale(1.15) rotateY(360deg)';
          }
          
          this.style.transition = 'all 0.8s cubic-bezier(0.4, 0.0, 0.2, 1)';
          
          setTimeout(() => {
            this.style.transform = '';
            this.style.transition = '';
          }, 800);
        });

        element.addEventListener('mouseenter', function() {
          this.style.filter = 'brightness(1.3) drop-shadow(0 12px 30px rgba(59, 130, 246, 0.5))';
          this.style.zIndex = '10';
        });

        element.addEventListener('mouseleave', function() {
          this.style.filter = '';
          this.style.zIndex = '';
        });
      });

      // Initialize animations on load
      initializeAnimations();
    });
  </script>
</body>
</html>
