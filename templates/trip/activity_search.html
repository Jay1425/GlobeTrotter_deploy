<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Activity Search â€¢ GlobeTrotter</title>
	<link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
	<style>
		* { font-family: 'Inter', sans-serif; }
		.glass-effect { background: rgba(255,255,255,0.95); backdrop-filter: blur(10px); border: 1px solid rgba(0,0,0,0.05); }
	</style>
	</head>
<body class="bg-gray-50 min-h-screen">
	<!-- Include standardized navbar -->
	{% include 'partials/navbar.html' %}

{% block content %}
<section class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10">
	<header class="mb-8">
		<div class="flex items-center justify-between">
			<div>
				<h1 class="text-3xl font-bold text-gray-900">Find Activities</h1>
				<p class="text-gray-600">
					{% if trip and section_id %}
						Add activities to Section {{ section_id }} of "{{ trip.title }}"
					{% elif trip %}
						Search activities for "{{ trip.title }}"
					{% else %}
						Search popular activities, tours, and experiences for your trip.
					{% endif %}
				</p>
			</div>
			{% if return_url %}
			<a href="{{ return_url }}" class="inline-flex items-center px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors">
				<i class="fas fa-arrow-left mr-2"></i>
				Back to Itinerary
			</a>
			{% endif %}
		</div>
	</header>

	<form class="grid md:grid-cols-4 gap-4 bg-white p-4 rounded-xl shadow">
		<div>
			<label class="block text-sm text-gray-700 mb-1" for="city">City</label>
			<input id="city" name="city" type="text" placeholder="e.g., Paris" class="w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none" />
		</div>
		<div>
			<label class="block text-sm text-gray-700 mb-1" for="date">Date</label>
			<input id="date" name="date" type="date" class="w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none" />
		</div>
		<div>
			<label class="block text-sm text-gray-700 mb-1" for="category">Category</label>
			<select id="category" name="category" class="w-full border rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:outline-none">
				<option value="">Any</option>
				<option value="sightseeing">Sightseeing</option>
				<option value="adventure">Adventure</option>
				<option value="food">Food & Drink</option>
				<option value="culture">Culture</option>
			</select>
		</div>
		<div class="flex items-end">
			<button type="submit" class="w-full inline-flex items-center justify-center gap-2 rounded-lg bg-blue-600 px-4 py-2 font-medium text-white hover:bg-blue-700">
				<i class="fas fa-search"></i>
				Search
			</button>
		</div>
	</form>

	<!-- Filters -->
	<div class="mt-8 flex flex-wrap gap-4 mb-6">
		<button type="button" class="px-4 py-2 rounded-full text-sm font-medium transition-colors"
				data-active="true"
				onclick="toggleFilter(this)"
				style="background-color: rgba(99, 102, 241, 0.1); color: rgb(99, 102, 241);">
			All Activities
		</button>
		<button type="button" class="px-4 py-2 rounded-full text-sm font-medium bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors"
				data-active="false"
				onclick="toggleFilter(this)">
			Sightseeing
		</button>
		<button type="button" class="px-4 py-2 rounded-full text-sm font-medium bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors"
				data-active="false"
				onclick="toggleFilter(this)">
			Food & Dining
		</button>
		<button type="button" class="px-4 py-2 rounded-full text-sm font-medium bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors"
				data-active="false"
				onclick="toggleFilter(this)">
			Adventure
		</button>
		<button type="button" class="px-4 py-2 rounded-full text-sm font-medium bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors"
				data-active="false"
				onclick="toggleFilter(this)">
			Cultural
		</button>
	</div>

	<!-- Price Range Filter -->
	<div class="mb-8 bg-white p-6 rounded-xl shadow">
		<h3 class="text-lg font-semibold mb-4">Price Range</h3>
		<div class="flex items-center gap-4">
			<input type="range" min="0" max="1000" value="500" class="w-full" id="priceRange">
			<span class="text-gray-600 min-w-[80px]">Up to $<span id="priceValue">500</span></span>
		</div>
	</div>

	<!-- Results Grid -->
	<div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6" id="activityResults">
		<!-- Example Activity Card -->
		<div class="activity-card bg-white rounded-xl shadow-md overflow-hidden transition-transform duration-300 hover:-translate-y-2">
			<img src="https://source.unsplash.com/800x500/?paris-tourism" alt="Eiffel Tower Tour" class="w-full h-48 object-cover">
			<div class="p-6">
				<div class="flex justify-between items-start mb-4">
					<div>
						<span class="px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full">Sightseeing</span>
						<h3 class="text-xl font-semibold text-gray-900 mt-2">Eiffel Tower Tour</h3>
						<p class="text-gray-600">Paris, France</p>
					</div>
				</div>
				<div class="space-y-2 mb-4">
					<div class="flex items-center text-sm text-gray-500">
						<i class="fas fa-clock w-5"></i>
						<span>3 hours</span>
					</div>
					<div class="flex items-center text-sm text-gray-500">
						<i class="fas fa-user-group w-5"></i>
						<span>Small group</span>
					</div>
					<div class="flex items-center text-sm text-gray-500">
						<i class="fas fa-language w-5"></i>
						<span>English, French</span>
					</div>
				</div>
				<div class="flex justify-between items-center">
					<div class="text-xl font-bold text-gray-900">$89</div>
					<button onclick="addToItinerary('eiffel-tower-tour')" 
							class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors">
						Add to Itinerary
					</button>
				</div>
			</div>
		</div>

		<!-- More activity cards will be added dynamically -->
	</div>

	<!-- Loading State -->
	<div id="loadingState" class="hidden">
		<div class="flex justify-center items-center py-12">
			<div class="animate-spin rounded-full h-12 w-12 border-4 border-indigo-600 border-t-transparent"></div>
		</div>
	</div>
</section>

<script>
	// Update price range value
	const priceRange = document.getElementById('priceRange');
	const priceValue = document.getElementById('priceValue');
	priceRange.addEventListener('input', function() {
		priceValue.textContent = this.value;
	});

	// Toggle filter buttons
	function toggleFilter(button) {
		const wasActive = button.getAttribute('data-active') === 'true';
		if (!wasActive) {
			// Reset all buttons
			document.querySelectorAll('[data-active]').forEach(btn => {
				btn.setAttribute('data-active', 'false');
				btn.style.backgroundColor = '';
				btn.style.color = '';
				btn.classList.add('bg-gray-100', 'text-gray-700');
				btn.classList.remove('bg-indigo-100', 'text-indigo-600');
			});
			
			// Activate clicked button
			button.setAttribute('data-active', 'true');
			button.style.backgroundColor = 'rgba(99, 102, 241, 0.1)';
			button.style.color = 'rgb(99, 102, 241)';
			button.classList.remove('bg-gray-100', 'text-gray-700');
		}
	}

	// Add to itinerary functionality
	function addToItinerary(activityId) {
		const button = event.target;
		const originalText = button.textContent;
		button.disabled = true;
		button.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Adding...';

		// Simulate API call
		setTimeout(() => {
			button.innerHTML = '<i class="fas fa-check mr-2"></i>Added';
			button.classList.remove('bg-indigo-600', 'hover:bg-indigo-700');
			button.classList.add('bg-green-600', 'hover:bg-green-700');
			
			showNotification('Activity added to your itinerary!', 'success');

			setTimeout(() => {
				button.innerHTML = originalText;
				button.disabled = false;
				button.classList.remove('bg-green-600', 'hover:bg-green-700');
				button.classList.add('bg-indigo-600', 'hover:bg-indigo-700');
			}, 2000);
		}, 1000);
	}

	// Show notification
	function showNotification(message, type = 'success') {
		const notification = document.createElement('div');
		notification.className = `fixed top-4 right-4 z-50 px-6 py-3 rounded-lg shadow-lg text-white transform translate-x-full transition-transform duration-300 ${
			type === 'success' ? 'bg-green-500' : 'bg-red-500'
		}`;
		notification.textContent = message;
		
		document.body.appendChild(notification);
		
		setTimeout(() => notification.style.transform = 'translateX(0)', 100);
		
		setTimeout(() => {
			notification.style.transform = 'translateX(full)';
			setTimeout(() => notification.remove(), 300);
		}, 3000);
	}

	// Search form submission
	document.querySelector('form').addEventListener('submit', function(e) {
		e.preventDefault();
		const city = document.getElementById('city').value;
		const date = document.getElementById('date').value;
		const category = document.getElementById('category').value;
		
		// Show loading state
		document.getElementById('loadingState').classList.remove('hidden');
		document.getElementById('activityResults').classList.add('opacity-50');
		
		// Simulate API call
		setTimeout(() => {
			document.getElementById('loadingState').classList.add('hidden');
			document.getElementById('activityResults').classList.remove('opacity-50');
			showNotification(`Found activities in ${city}`, 'success');
		}, 1000);
	});
</script>
{% endblock %}
</body>
</html>
